<!DOCTYPE html>
<html lang="en">
  <head>
	<title>Osmium</title>
	<link href="favicon.ico" rel="icon" type="image/png">
	
	<!-- Vue Styling -->
	<link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900" rel="stylesheet">
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<!-- <link href="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.min.css" rel="stylesheet"> -->
	<link href="style.css" rel="stylesheet" type ="text/css"/>
	
  </head>
  <script>
	
	function get12time(date) {
		var hours = date.getHours();
		var minutes = date.getMinutes();
		var ampm = hours >= 12 ? 'pm' : 'am';
		hours = hours % 12;
		hours = hours ? hours : 12; // the hour '0' should be '12'
		minutes = minutes < 10 ? '0'+minutes : minutes;
		var strTime = hours + ':' + minutes + ' ' + ampm;
		return strTime;
}
	
	function getColorClassFromStatus(statusName, isSentToTech) {
		if (isSentToTech == true) {
			return "tech"+statusName;
		} else {
			return statusName;
		}
	}
	
	//OBJECT - Card
	function new_Card(studentName, timeStamp, statusName, isSentToTech) {
		const obj = {};
		obj.name = studentName;
		obj.time = timeStamp;
		obj.status = statusName;
		obj.tech = isSentToTech
		
		//create card
		var wrap = document.createElement('div');
			wrap.classList.add('check-card');
			var btn = document.createElement('button');
			wrap.appendChild(btn);
			var txtwrap = document.createElement('div');
				txtwrap.classList.add('text-holder');
				var txtmed = document.createElement('div');
					txtmed.classList.add('medium-text');
					txtmed.innerHTML = obj.name;
				txtwrap.appendChild(txtmed);
				var txtsml = document.createElement('div');
					txtsml.classList.add('small-text');
					txtsml.innerHTML = get12time(obj.time);
				txtwrap.appendChild(txtsml);
			wrap.appendChild(txtwrap);
			
		obj.card = wrap;
		
		obj.updateStatusAndColor = function(statusName, isSentToTech) {
			var newcolor = getColorClassFromStatus(statusName, isSentToTech);
			obj.card.classList = "";
			obj.card.classList.add('check-card');
			obj.card.classList.add("color-card-"+newcolor);
			obj.status = statusName;
			obj.tech = isSentToTech;
		}
		obj.updateStatusAndColor(obj.status,obj.tech);
		
		obj.insertIntoCards = function() {
			document.getElementById("insert-cards").insertAdjacentElement('afterEnd',obj.card);
		};
		
		return obj;
	}
	
	var cards = [];
	function test() {
		for (var i=1; i<=4; i++) {
		if (parseInt(Math.random() * 4) == 0) {
			var card = new_Card("Joeseph Jones",new Date(new Date().getTime()+Math.random()*100000000),"in",parseInt(Math.random()*2));
			cards.push(card);
			card.insertIntoCards();
		} else {
			var card = new_Card("Joeseph Jones",new Date(new Date().getTime()+Math.random()*100000000),"out",parseInt(Math.random()*2));
			cards.push(card);
			card.insertIntoCards();
		}
		}
	}
	
function updateTodaysDate() {
	//var now = new Date(new Date().getTime()+Math.random()*100000000000)
	var now = new Date();
	var s = now.toLocaleString('en-US',{weekday:'long',month:'long',day:'numeric'});
	var d = s.split(", ");
	d[0] += ",";
	d.push(get12time(now));
	var here = document.getElementById('todays-date');
	for (var i=0; i<d.length; i++) {
		here.children[i].innerHTML = d[i];
	}
	setTimeout(function(){updateTodaysDate();},60000);
}
	</script>
  <body class="color-bg-main">
	<!-- testing element -->
	<button class="center-h" style="position: absolute;left:0;top:0;z-index:10000;" onclick="test()">test: Press to add :)</button>
	<!-- end test-->
	<div class="split-left pretty-scrollbar-dark">
		<div class="small-spacer"></div>
		<div id='search-wrapper'>
			<div id='searchbar'>
				<i class="material-icons">search</i>
				<input type='text' id='searchfield' placeholder="Search"></input>
			</div>
		</div>
		<div id='cards-wrapper'>
			<div class="null-spacer" id="insert-cards"></div>
		</div>
	</div>
	<div class="split-right">
		<div id="overview-table">
			<div class="tablerow">
				<div id="todays-date" class="center-h title">
					<div class="center-h medium-text"></div>
					<div class="center-h medium-text"></div>
					<div class="center-h medium-text" style="padding-bottom:10px;"></div>
					</div>
			</div>
			
			<div class="tablerow">
				<div class="center-h title medium-text">In the Library</div>
				<div class="half-pair">
					<div class="left">
						<div class="large-text">10</div>
						<div class="small-text">Checked In</div>
					</div>
					<div class="middle"></div>
					<div class="right">
						<div class="large-text">2</div>
						<div class="small-text">In Tech</div>
					</div>
				</div>
			</div>
			
			<div class="tablerow">
				<div class="center-h title medium-text">Today's Traffic</div>
				<div class="half-pair">
					<div class="left">
						<div class="large-text">23</div>
						<div class="small-text">Students</div>
					</div>
					<div class="middle"></div>
					<div class="right">
						<div class="large-text">5</div>
						<div class="small-text">Tech Issues</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- WIP ELEMENT -->
	<div id="checkout-popup" style="display: none">
		<div id="checkout-container" class="color-bg-alt">
			<div class="small-spacer"></div>
			<div class="title center-h">Check Out</div>
			<div class="medium-spacer"></div>
			<button class="close material-icons">close</button>
		</div>
	</div>
	<!-- END WIP -->
  </body>
</html>
<script>
updateTodaysDate();	
</script>
