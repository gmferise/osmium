<!DOCTYPE html>
<html lang="en">
  <head>
	<title>Osmium</title>
	<link href="favicon.ico" rel="icon" type="image/png">
	
	<!-- Vue Styling -->
	<link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900" rel="stylesheet">
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<!-- <link href="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.min.css" rel="stylesheet"> -->
	<link href="style.css" rel="stylesheet" type ="text/css"/>
	
  </head>
  <script>
	//showSidebar() - toggle visibility
	//showSidebar(true|false) - set visibility
	function showSidebar(forcestate) {
		var el = document.getElementById("splitbody");
		if ((el.classList.contains("split-visible"))&&(forcestate != true)) {
			//hide sidebar
			el.classList.remove("split-visible");
			//side-effect: hide searchbar in sidebar
			showSearch(false);
		} else if (forcestate != false) {
			//show sidebar
			el.classList.add("split-visible");
			//side-effect: scroll sidebar cards list to top
			document.getElementById('cards-wrapper').scrollTop = 0;
		}
	}
	
	function showSearch(forcestate) {
		var el = document.getElementById("search-wrapper");
		if ((el.classList.contains("expanded"))&&(forcestate != true)) {
			//minimize search
			el.classList.remove("expanded");
			//side-effect: clear search
			document.getElementById('searchfield').value = '';
		} else if (forcestate != false) {
			//maximize search
			el.classList.add("expanded");
			//side-effect: focus search
			document.getElementById('searchfield').focus();
		}
	}
	
	function getColorClassFromStatus(statusName, isSentToTech) {
		if (isSentToTech == true) {
			return "tech"+statusName;
		} else {
			return statusName;
		}
	}
	
	//OBJECT - Card
	function new_Card(studentName, timeStamp, statusName, isSentToTech) {
		const obj = {};
		obj.name = studentName;
		obj.time = timeStamp;
		obj.status = statusName;
		obj.tech = isSentToTech
		
		//create card
		var wrap = document.createElement('div');
			wrap.classList.add('check-card');
			var btn = document.createElement('button');
			wrap.appendChild(btn);
			var txtwrap = document.createElement('div');
				txtwrap.classList.add('text-holder');
				var txtmed = document.createElement('div');
					txtmed.classList.add('medium-text');
					txtmed.innerHTML = obj.name;
				txtwrap.appendChild(txtmed);
				var txtsml = document.createElement('div');
					txtsml.classList.add('small-text');
					txtsml.innerHTML = obj.time + "m ago";
				txtwrap.appendChild(txtsml);
			wrap.appendChild(txtwrap);
			
		obj.card = wrap;
		
		obj.updateStatusAndColor = function(statusName, isSentToTech) {
			var newcolor = getColorClassFromStatus(statusName, isSentToTech);
			obj.card.classList = "";
			obj.card.classList.add('check-card');
			obj.card.classList.add("color-card-"+newcolor);
			obj.status = statusName;
			obj.tech = isSentToTech;
		}
		obj.updateStatusAndColor(obj.status,obj.tech);
		
		obj.insertIntoCards = function() {
			document.getElementById("insert-cards").insertAdjacentElement('afterEnd',obj.card);
		};
		
		return obj;
	}
	
	var cards = [];
	function test() {
		for (var i=1; i<=4; i++) {
		if (parseInt(Math.random() * 4) == 0) {
			var card = new_Card("Joeseph Jones",i*3,"in",parseInt(Math.random()*2));
			cards.push(card);
			card.insertIntoCards();
		} else {
			var card = new_Card("Joeseph Jones",i*3,"out",parseInt(Math.random()*2));
			cards.push(card);
			card.insertIntoCards();
		}
		}
	}
	
	</script>
  <body class="color-bg-main">
	<!-- testing element -->
	<button class="center-h" style="position: absolute;left:0;top:0;z-index:10000;" onclick="test()">test: Press to add :)</button>
	<!-- end test-->
	<div class="split-left">
		<div class="small-spacer"></div>
		<div id='search-wrapper'>
			<div id='searchbar'>
				<i class="material-icons">search</i>
				<input type='text' id='searchfield' placeholder="Search"></input>
			</div>
		</div>
		<div id='cards-wrapper' class='pretty-scrollbar-dark'>
			<div class="null-spacer" id="insert-cards"></div>
		</div>
	</div>
	<div class="split-right">
		<div class="center-h title">Overview</div>
	</div>
	<!-- WIP ELEMENT -->
	<div id="checkout-popup" style="display: none">
		<div id="checkout-container" class="color-bg-alt">
			<div class="small-spacer"></div>
			<div class="title center-h">Check Out</div>
			<div class="medium-spacer"></div>
			<button class="close material-icons">close</button>
		</div>
	</div>
	<!-- END WIP -->
  </body>
</html>
