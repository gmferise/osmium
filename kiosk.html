<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Osmium</title>
		<link href="style.css" rel="stylesheet" type ="text/css"/>
		<link href="favicon.ico" rel="icon" type="image/png">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
		<script src="scripts.js"></script> 
		<script src="https://www.gstatic.com/charts/loader.js"></script>
		<script>
			google.charts.load('current');
		</script>
		<script async defer src="https://apis.google.com/js/api.js" 
			onload="this.onload=function(){};loadAuth()" 
			onreadystatechange="if (this.readyState === 'complete') this.onload()">
		</script>
		<!-- Vue Styling -->
		<link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900" rel="stylesheet">
		<link href="https://fonts.googleapis.com/icon?family=Material+Icons|Material+Icons+Outlined|Material+Icons+Round" rel="stylesheet">
		<!-- <link href="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.min.css" rel="stylesheet"> -->
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
	</head>
	<body class="bigbody fixedratio">
		
		<div id="check-in-popup" class="bigpopup pretty-scrollbar-light">
			<div class="content">
				<div class="title-center fullsize fullwidth">Sign In to the Library</div>
				<i class="material-icons">perm_identity</i>
				<input id="check-in-id" type="text" placeholder="Student ID"></input>
				<button id='check-in-loading' class="material-icons big ok" onclick=""></button>
				<button class="material-icons big cancel" onclick='showCheckIn(false);'>close</button>
			</div>
			<div class="content-extra">
				<div class="medium-text title-left">I'm here to...</div>
				<label class="checkbox-container">
					Work/Study/Read
					<i class='material-icons'>menu_book</i>
					<input id='work-checkbox' type="checkbox">
					<span class="checkmark"></span>
				</label>
				<label class="checkbox-container">
					Get Tech Help
					<i class='material-icons'>phonelink</i>
					<input id='tech-help-checkbox' type="checkbox">
					<span class="checkmark"></span>
				</label>
				<label class="checkbox-container">
					Print Documents
					<i class='material-icons'>print</i>
					<input id='print-checkbox' type="checkbox">
					<span class="checkmark"></span>
				</label>
			</div>
			<div class="numpad">
				<button class="num7" onclick="numpadInput('check-in-id',this.innerText);">7</button>
				<button class="num8" onclick="numpadInput('check-in-id',this.innerText);">8</button>
				<button class="num9" onclick="numpadInput('check-in-id',this.innerText);">9</button>
				
				<button class="num4" onclick="numpadInput('check-in-id',this.innerText);">4</button>
				<button class="num5" onclick="numpadInput('check-in-id',this.innerText);">5</button>
				<button class="num6" onclick="numpadInput('check-in-id',this.innerText);">6</button>
				
				<button class="num1" onclick="numpadInput('check-in-id',this.innerText);">1</button>
				<button class="num2" onclick="numpadInput('check-in-id',this.innerText);">2</button>
				<button class="num3" onclick="numpadInput('check-in-id',this.innerText);">3</button>
				
				<button class="num0" onclick="numpadInput('check-in-id',this.innerText);">0</button>
				<button class="numbs" onclick="numpadInput('check-in-id',this.innerText);">backspace</button>
			</div>
		</div>
		<div id="check-out-popup" class="bigpopup pretty-scrollbar-light">
			<div class="content">
				<div class="title-center fullsize fullwidth">Sign Out of the Library</div>
				<i class="material-icons">perm_identity</i>
				<input id="check-out-id" type="text" placeholder="Student ID"></input>
				<button id='check-out-loading' class="material-icons big ok" onclick="createDatabaseSender();"></button>
				<button class="material-icons big cancel" onclick='showCheckOut(false);'>close</button>
			</div>
			<div class="content-extra">
				<div class='large-text'>
				Thanks for visiting!
				</div>
			</div>
			<div class="numpad">
				<button class="num7" onclick="numpadInput('check-out-id',this.innerText);">7</button>
				<button class="num8" onclick="numpadInput('check-out-id',this.innerText);">8</button>
				<button class="num9" onclick="numpadInput('check-out-id',this.innerText);">9</button>
				
				<button class="num4" onclick="numpadInput('check-out-id',this.innerText);">4</button>
				<button class="num5" onclick="numpadInput('check-out-id',this.innerText);">5</button>
				<button class="num6" onclick="numpadInput('check-out-id',this.innerText);">6</button>
				
				<button class="num1" onclick="numpadInput('check-out-id',this.innerText);">1</button>
				<button class="num2" onclick="numpadInput('check-out-id',this.innerText);">2</button>
				<button class="num3" onclick="numpadInput('check-out-id',this.innerText);">3</button>
				
				<button class="num0" onclick="numpadInput('check-out-id',this.innerText);">0</button>
				<button class="numbs" onclick="numpadInput('check-out-id',this.innerText);">backspace</button>
			</div>
		</div>
		
		<div class='pretty-scrollbar-dark'>
			<div class='fullsize title-center logotext'>Welcome to the Library</div>
			<div class='medium-spacer'></div>
			<button class="check-in big" onclick="showCheckIn(true);">Sign In</button>
			<div class='medium-spacer'></div>
			<button class="check-out big" onclick="showCheckOut(true);">Sign Out</button>
		</div>
	
	</body>
</html>

<script>
var databaseId = new URLSearchParams(window.location.search).get('id');
if (databaseId == null) {
	console.log("ERROR: no database selected");
}

document.getElementById('check-in-id').addEventListener("keydown", function(event) {
    event.preventDefault();
    numpadInput('check-in-id',event.key.toLowerCase());
});
document.getElementById('check-out-id').addEventListener("keydown", function(event) {
    event.preventDefault();
    numpadInput('check-out-id',event.key.toLowerCase());
});

function showCheckIn(state) {
	if (state == true) {
		document.getElementById('check-in-popup').style = 'visibility: visible';
		document.getElementById('check-in-id').focus();
	} else {
		document.getElementById('check-in-popup').style = '';
		document.getElementById("check-in-id").value = "";
		document.getElementById('tech-help-checkbox').checked = false;
		document.getElementById('check-in-loading').classList.remove('loading');
		databaseSenderState = 0;
	}
}
function showCheckOut(state) {
	if (state == true) {
		document.getElementById('check-out-popup').style = 'visibility: visible';
		document.getElementById('check-out-id').focus();
	} else {
		document.getElementById('check-out-popup').style = '';
		document.getElementById("check-out-id").value = "";
		document.getElementById('check-out-loading').classList.remove('loading');
		databaseSenderState = 0;
	}
}
function numpadInput(targetid,value) {
	var target = document.getElementById(targetid);
	if (value == "backspace") {
		if (target.value.length > 0) {
			target.value = target.value.substring(0,target.value.length-1);
		}
	} else if ((isNaN(value) == false)&&(target.value.length < 6)) {
		target.value += value;
	}
}
</script>